# agri-frontend

> A Vue.js project

## Build Setup

``` bash
# install dependencies
npm install

# serve with hot reload at localhost:8080
npm run dev

# build for production with minification
npm run build

# build for production and view the bundle analyzer report
npm run build --report


npm install -g @aws-amplify/cli

amplify init
amplify add auth
amplify push

# In IAM, attach IoTDataAccess policy to Unauthenticated role which is generated by amplify CLI. 
# In `src/configs/endpoint.js`, modify IoT Endpoint and Region to your current environment.
# (Optional) Create an repository with CodeCommit.
# (Optional) Create amplify console and associate with the repository. 
# (Optional) Setup domain if needed.
# (Optional) Setup basic authentication  if needed.

```

## Environments
- prod: [agri.prototypers.net](agri.prototypers.net)
- dev: [dev.agri.prototypers.net](dev.agri.prototypers.net)


For a detailed explanation on how things work, check out the [guide](http://vuejs-templates.github.io/webpack/) and [docs for vue-loader](http://vuejs.github.io/vue-loader).

## Topic Design
### Sensor
* topic
  * data/{env}/{area}/{device_type}/{thing_name}
  * moisture
    * topic
      * data/agri/area1/moisture/1
    * message
      * ```json
        {
          "moisture": 1234
        }
        ```
  * pump
    * topic
      * cmd/agri/area1/pump/2
    * message
      * ```json
        {
          "set":"ON",
          "duration":3
        }
        ```
    * topic
      * data/agri/area1/pump/pump1
    * message
      * ```json
        {
          "state":"ON"
        }
        ```
  * light
    * topic
    * message
  * state change
    * topic
      * state/agri/area1/moisture/moisture1
    * message
      * ```json
        {
          "state": "Drying"
        }
        ```
      * state : Drying, Moist or Sensor-Down
